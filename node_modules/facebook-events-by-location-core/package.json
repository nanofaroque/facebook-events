{
  "_args": [
    [
      {
        "raw": "facebook-events-by-location-core",
        "scope": null,
        "escapedName": "facebook-events-by-location-core",
        "name": "facebook-events-by-location-core",
        "rawSpec": "",
        "spec": "latest",
        "type": "tag"
      },
      "/Users/omarfaroque/Desktop/facebookevents/myapp"
    ]
  ],
  "_from": "facebook-events-by-location-core@latest",
  "_id": "facebook-events-by-location-core@0.3.0",
  "_inCache": true,
  "_location": "/facebook-events-by-location-core",
  "_nodeVersion": "7.7.4",
  "_npmOperationalInternal": {
    "host": "packages-12-west.internal.npmjs.com",
    "tmp": "tmp/facebook-events-by-location-core-0.3.0.tgz_1492092906633_0.4611590278800577"
  },
  "_npmUser": {
    "name": "tobilg",
    "email": "tobilg@gmail.com"
  },
  "_npmVersion": "4.1.2",
  "_phantomChildren": {},
  "_requested": {
    "raw": "facebook-events-by-location-core",
    "scope": null,
    "escapedName": "facebook-events-by-location-core",
    "name": "facebook-events-by-location-core",
    "rawSpec": "",
    "spec": "latest",
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/facebook-events-by-location-core/-/facebook-events-by-location-core-0.3.0.tgz",
  "_shasum": "9a2db428b85762e92a56b025a60a0e6b604bb456",
  "_shrinkwrap": null,
  "_spec": "facebook-events-by-location-core",
  "_where": "/Users/omarfaroque/Desktop/facebookevents/myapp",
  "bugs": {
    "url": "https://github.com/tobilg/facebook-events-by-location-core/issues"
  },
  "dependencies": {
    "bluebird": "^3.4.1",
    "dotenv": "^2.0.0",
    "request": "^2.74.0",
    "request-promise": "^4.1.1"
  },
  "description": "Search Facebook events by location and proximity.",
  "devDependencies": {
    "ajv": "^4.4.1",
    "chai": "~3.5.0",
    "chai-as-promised": "^5.3.0",
    "chalk": "~1.1.3",
    "gulp": "~3.9.1",
    "gulp-istanbul": "~1.0.0",
    "gulp-mocha": "~2.2.0",
    "publish-please": "~2.1.4",
    "rimraf": "~2.5.3",
    "run-sequence": "~1.2.2"
  },
  "directories": {},
  "dist": {
    "shasum": "9a2db428b85762e92a56b025a60a0e6b604bb456",
    "tarball": "https://registry.npmjs.org/facebook-events-by-location-core/-/facebook-events-by-location-core-0.3.0.tgz"
  },
  "engines": {
    "node": ">=0.10.0"
  },
  "gitHead": "980c0614a0fa475358c8b695f34a89fd4aa49451",
  "homepage": "https://github.com/tobilg/facebook-events-by-location-core",
  "keywords": [
    "facebook",
    "events",
    "event",
    "search",
    "location",
    "backend"
  ],
  "license": "MIT",
  "maintainers": [
    {
      "name": "tobilg",
      "email": "tobilg@gmail.com"
    }
  ],
  "name": "facebook-events-by-location-core",
  "optionalDependencies": {},
  "private": false,
  "readme": "# Search Facebook events by location, distance and search terms\n\nAs Facebook has discontinued the FQL query API for all apps created after 2014-04-30, it has gotten much more complicated to get public Facebook events by passing a location.\n\nThis implementation uses regular Facebook Graph API calls in a three-step approach to get the events:\n\n1. Search for places in the radius of the passed coordinate and distance (`/search?type=place&q={query}&center={coordinate}&distance={distance}`)\n2. Use the places to query for their events in parallel (`/?ids={id1},{id2},{id3},...`)\n3. Unify, filter and sort the results from the parallel calls and return them to the client\n\n### Known limitations\n\n* The Graph API has some \"instabilities\" with search results. It's possible that the amount of results returned can vary between calls within seconds\n* The `/search` endpoint \"magically\" limits the number of results, independent from the `distance` used (larger distance doesn't guarantee more results)\n* [Rate limiting](https://developers.facebook.com/docs/graph-api/advanced/rate-limiting) will apply, but I experienced no call blocks within a reasonable amount of service requests. Be aware that the way this application works, there are potentially hundreds of (counted) Graph API calls per request to `/events`.\n\n## Installation\n\n### As NPM package\n\nThe module can be installed via \n\n`npm install facebook-events-by-location-core --save`\n\n### Git\n\nTo clone the repository, use\n\n`git clone https://github.com/tobilg/facebook-events-by-location-core.git`\n\n## Usage\n\nThe basic usage pattern of this module is the following:\n\n```javascript\nvar EventSearch = require(\"facebook-events-by-location-core\");\n\nvar es = new EventSearch({\n    \"lat\": 40.710803,\n    \"lng\": -73.964040\n});\n\nes.search().then(function (events) {\n    console.log(JSON.stringify(events));\n}).catch(function (error) {\n    console.error(JSON.stringify(error));\n});\n```\n\n### Access Tokens\n\nThe above example expects that the `FEBL_ACCESS_TOKEN` environment variable is set to a valid App Access Token. Otherwise, you need to specify the `accessToken` parameter with the request.\n\n### Parameters\n\nMandatory parameters are the following:\n\n* `lat`: The latitude of the position/coordinate the events shall be returned for\n* `lng`: The longitude of the position/coordinate the events shall be returned for\n\nNon-mandatory parameters\n\n* `query`: The term(s) on which you want to narrow down your *location search* (this only filters the places, not the events itself!).\n* `accessToken`: The **App Access Token** to be used for the requests to the Graph API.\n* `distance`: The distance in meters (it makes sense to use smaller distances, like max. 2500). Default is `100`.\n* `sort`: The results can be sorted by `time`, `distance`, `venue` or `popularity`. If omitted, the events will be returned in the order they were received from the Graph API.\n* `version`: The version of the Graph API to use. Default is `v2.7`.\n* `since`: The start of the range to filter results. Format is Unix timestamp or `strtotime` data value, as accepted by [FB Graph API](https://developers.facebook.com/docs/graph-api/using-graph-api#time).\n* `until`: The end of the range to filter results.\n\n### Sample output (shortened)\n\n```javascript\n{\n\t\"events\": [{\n        \"id\": \"194204067750547\",\n        \"name\": \"Jessica Hernandez & the Deltas at Baby's All Right\",\n        \"type\": \"public\",\n        \"coverPicture\": \"https://scontent.xx.fbcdn.net/v/t31.0-8/s720x720/17758407_10158752838305227_652819766277990370_o.jpg?oh=6f1076521abfe609f45c49f03b6ad3a7&oe=59978EB7\",\n        \"profilePicture\": \"https://scontent.xx.fbcdn.net/v/t1.0-0/c50.0.200.200/p200x200/17796620_10158752838305227_652819766277990370_n.jpg?oh=b8fd07b35c4f227e4837465e3abe7963&oe=594D43B4\",\n        \"description\": \"Tuesday June 13 @ Baby's All Right \\n\\nAdHoc Presents\\n\\nJessica Hernandez & The Deltas\\n\\nTIX: http://ticketf.ly/2oawOtz\\n\\n| Baby's All Right |\\n146 Broadway @ Bedford Ave | Williamsburg, Brooklyn \\nJMZ-Marcy, L-Bedford, G-Broadway | 7pm | $12+ | 18+\\n\\nSign up for the mailing list http://tinyurl.com/adhocfmlist\\nSubscribe to our events http://facebook.com/adhocfm/events\\n\\nUpcoming AdHoc Shows\\n\\n04/13 Entrance (Guy Blakeslee), Ensalmo, Permanent Waves\\n04/13 Kane West, Wharfwhit, Bruce Smear, Honnda\\n04/14 Pharmakon (Record Release), Coteries, New Castrati\\n04/15 Varsity, Fruit & Flowers, Petite League\\n04/15 070Shake\\n04/16 Lithics, Pucker Up, Bodega, Giggly Boys\\n04/20 Helltrap Nightmare: the Hags Return\\n04/20 The Coathangers \\n04/21 The Coathangers\\n04/22 Wolf Eyes (Record Release)\\n04/22 Vatican Shadow\\n04/23 Tonstartssbandht at The Park Church Co-op\\n04/27 HAUX, Dizzy, Aisha Badru\\n04/27 Sam Coffey & The Iron Lungs, Mikey Erg, The Othermen The Lame-Os\\n04/27 Screaming Females\\n04/28 Joakim, Starchild & The New Romantic\\n04/28 Laser Background, Operator Music Band, Norwegian Arms, Railings\\n04/29 White Lung\\n05/02 Novelty Daughter, Elisa, Zenizen, Nicholas Nicholas\\n05/03 The Revolution\\n05/04 Emo Nite LA w/ special guests\\n05/05 Omni, Honduras, Patio\\n05/05 Ava Luna, Sammus, Mallrat\\n05/05 Crushed (Record Release) w/ Sick Feeling, Neaux, Slashers\\n05/05 Ava Luna, Sammus, Mall Rat\\n05/05 Beanie Sigel, Manhattan Mal, Young Ros, Tim Wicked\\n05/06 HOW SAD, Salt Cathedral\\n05/06 Vagabon, Nnamdi Ogbonnaya, So Much Light\\n05/07 Mega Bog, Tasseomancy\\n05/09 Frank Carter & The Rattlesnakes, Dinosaur Pile-Up, Royal Republic\\n05/09 Radkey\\n05/09 Chastity at Shea Stadium\\n05/09 Frank Carter & The Rattlesnakes, Dinosaur Pile-Up, Royal Republic\\n05/10 Savoy Motel, Lionlimb\\n05/10 Forest Swords, Actress, Umfang\\n05/11 Tall Heights, Henry Jamison\\n05/13 Alex Napping (Record Release), Pearer, gobbinjr, Long Neck\\n05/13 Midnight Oil - SOLD OUT\\n05/14 Midnight Oil\\n05/14 Tall Juan (Record Release), Wild Yaks, Ben Katzman's Degreaser\\n05/17 Sir Richard Bishop, Robert Millis at The Park Church Co-op\\n05/18 Alex G \\\"Rocket\\\" Release Show at The Park Church Co-op â€“ Sold Out\\n05/18 Rex Orange County\\n05/18 Highly Suspect\\n05/19 Odwalla1221, Sadaf, Chicklette, Halfpet\\n05/20 Adult Mom (Record Release) w/ B.B, Baby Grill\\n05/20 Prawn, Mumblr, Wild Pink, Hard Pass\\n05/20 Mumdance, Mr. Mitch, Shy Eyez\\n05/20 Silent Servant, Not Waving, Pye Corner Audio, Via App\\n05/24 Pixies - SOLD OUT\\n05/24 Conan, North, False Gods\\n05/25 The Walters, Palmas\\n05/27 Elf Power, Sunwatchers\\n05/27 Lil Debbie\\n05/30 Pet Symmetry, Ratboys\\n06/03 Chocolat, Bueno\\n06/04 The Orbiting Human Circus featuring The Music Tapes\\n06/06 Black Marble at Good Room\\n06/08 Aldous Harding\\n06/08 She-Devils\\n06/08 Meatbodies\\n06/08 Pelada, CL, Ciarra Black\\n06/08 Elysia Crampton, Moor Mother, Total Freedom\\n06/09 Girlpool, IAN Sweet, Lexie\\n06/09 Mirah\\n06/13 Jessica Hernandez & the Deltas\\n06/14 Man Forever (Record Release)\\n06/15 Sarah Shook & the Disarmers\\n06/17 Orchin, Hellrazor, Model/Actriz, Maneka\\n06/21 PWR BTTM, Tancred, Fits\\n06/24 Julie Byrne at the Park Church Co-op\\n07/11 Stolen Jars, Fraternal Twin, Thelma, Poppies\\n07/27 Mark McGuire, Ancient Ocean\",\n        \"distance\": \"89\",\n        \"startTime\": \"2017-06-13T19:00:00-0400\",\n        \"endTime\": \"2017-06-13T23:00:00-0400\",\n        \"timeFromNow\": 5302362,\n        \"category\": \"MUSIC_EVENT\",\n        \"stats\": {\n            \"attending\": 3,\n            \"declined\": 0,\n            \"maybe\": 15,\n            \"noreply\": 0\n        },\n        \"venue\": {\n            \"id\": \"460616340718401\",\n            \"name\": \"Baby's All Right\",\n            \"about\": \"babysallright@gmail.com\",\n            \"emails\": [\"babysallright@gmail.com\"],\n            \"coverPicture\": \"https://scontent.xx.fbcdn.net/v/t31.0-8/s720x720/16300274_1190598481053513_5678512810993788559_o.jpg?oh=dba6f85205e1c39c2b63ef34595116b3&oe=59587314\",\n            \"profilePicture\": \"https://scontent.xx.fbcdn.net/v/t1.0-1/p200x200/1480734_642185745894792_5820988503650852577_n.png?oh=c1b2de32d966516538b97e2d3515af69&oe=5984652D\",\n            \"category\": \"Dance & Night Club\",\n            \"category_list\": [\"Dance & Night Club\", \"Breakfast & Brunch Restaurant\"],\n            \"location\": {\n                \"city\": \"Brooklyn\",\n                \"country\": \"United States\",\n                \"latitude\": 40.71012,\n                \"longitude\": -73.96348,\n                \"state\": \"NY\",\n                \"street\": \"146 Broadway\",\n                \"zip\": \"11211\"\n            }\n        }\n    }],\n\t\"metadata\": {\n\t\t\"venues\": 1,\n\t\t\"venuesWithEvents\": 1,\n\t\t\"events\": 4\n\t}\n}\n```",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/tobilg/facebook-events-by-location-core.git"
  },
  "scripts": {
    "prepublish": "publish-please guard",
    "publish-please": "publish-please",
    "test": "gulp ci",
    "test-publish": "gulp ci"
  },
  "version": "0.3.0"
}
